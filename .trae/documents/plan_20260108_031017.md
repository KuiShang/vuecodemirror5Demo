## 实现方案：为参数列表添加输入过滤功能

### 核心需求
当参数列表（param-list）显示时，用户继续输入文字，根据输入内容过滤显示匹配的参数。

### 实现思路
1. **跟踪过滤文本** - 添加 `paramFilter` 数据属性，用于存储当前输入的过滤文本
2. **过滤计算属性** - 创建 `filteredParams` 计算属性，根据过滤文本筛选参数
3. **更新渲染逻辑** - 模板中使用过滤后的参数列表
4. **键盘事件处理** - 扩展 `onKeydown` 方法，处理参数列表显示时的输入
5. **导航逻辑更新** - 确保键盘导航（↑↓）在过滤后的列表上正常工作
6. **参数选择更新** - 确保选择的是过滤后列表中的参数

### 详细实现步骤

1. **添加数据属性**
   ```javascript
   data() {
     return {
       // 现有属性...
       paramFilter: '',  // 当前过滤文本
       // 现有属性...
     }
   }
   ```

2. **创建过滤计算属性**
   ```javascript
   computed: {
     // 现有计算属性...
     filteredParams() {
       if (!this.paramFilter) {
         return this.availableParams
       }
       const filter = this.paramFilter.toLowerCase()
       return this.availableParams.filter(param => 
         param.name.toLowerCase().includes(filter) ||
         param.description.toLowerCase().includes(filter)
       )
     }
     // 现有计算属性...
   }
   ```

3. **修改模板渲染**
   ```vue
   <div 
     v-for="(param, index) in filteredParams" 
     :key="param.name"
     class="param-item"
     :class="{ 'selected': index === currentIndex }"
     @click="selectParam(param)"
     @mouseenter="currentIndex = index"
   >
     <!-- 现有内容 -->
   </div>
   ```

4. **扩展键盘事件处理**
   ```javascript
   onKeydown(cm, event) {
     if (this.showParamList) {
       // 如果是字母、数字、下划线等可输入字符，更新过滤文本
       if (event.key.match(/[a-zA-Z0-9_]/)) {
         this.updateParamFilter(event.key)
         return
       }
       // 如果是退格键，删除过滤文本的最后一个字符
       if (event.key === 'Backspace') {
         this.removeLastFilterChar()
         return
       }
       // 现有导航逻辑
       this.handleParamListNavigation(event)
       return
     }
     // 现有逻辑...
   }
   ```

5. **添加过滤文本更新方法**
   ```javascript
   updateParamFilter(char) {
     this.paramFilter += char
     this.currentIndex = 0  // 重置选中索引
   },
   
   removeLastFilterChar() {
     if (this.paramFilter) {
       this.paramFilter = this.paramFilter.slice(0, -1)
       this.currentIndex = 0  // 重置选中索引
     }
   }
   ```

6. **更新初始化逻辑**
   ```javascript
   onOpenBrace(cm, event) {
     // 现有逻辑...
     this.paramFilter = ''  // 初始化过滤文本
     // 现有逻辑...
   }
   ```

7. **更新导航逻辑**
   ```javascript
   handleParamListNavigation(event) {
     // 现有逻辑...
     // 使用 filteredParams.length 替代 availableParams.length
     if (event.key === 'ArrowDown') {
       event.preventDefault()
       this.currentIndex = (this.currentIndex + 1) % this.filteredParams.length
     }
     // 现有逻辑...
   }
   ```

### 预期效果
1. 按 `{` 键显示参数列表
2. 继续输入文字，参数列表实时过滤
3. 使用 `↑↓` 键在过滤后的列表中导航
4. 按 `Enter` 选择当前高亮的参数
5. 按 `Backspace` 删除过滤字符
6. 按 `Esc` 关闭参数列表

### 技术要点
- 使用计算属性实现响应式过滤
- 合理处理键盘事件，区分导航键和输入键
- 确保索引计算基于过滤后的列表
- 初始化时重置过滤状态